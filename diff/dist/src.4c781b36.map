{"version":3,"sources":["src\\react\\create-element.js","src\\react-dom\\dom.js","src\\react-dom\\render.js","src\\react\\component.js","src\\react\\index.js","src\\react-dom\\index.js","src\\index.js"],"names":["createElement","tag","attrs","children","key","setAttribute","dom","name","value","test","toLowerCase","style","cssText","removeAttribute","renderComponent","render","_render","vnode","undefined","String","textNode","document","createTextNode","component","createComponent","setComponentProps","base","Object","keys","forEach","child","props","renderer","parentNode","replaceChild","_component","inst","prototype","Component","constructor","container","appendChild","isReactComponent","state","stateChange","assign","Counter","num","onClick","setState","React","ReactDOM","fontSize","fontWeight","getElementById"],"mappings":"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","file":"src.4c781b36.map","sourceRoot":"..","sourcesContent":["function createElement(tag, attrs, ...children){\r\n  attrs = attrs || {};\r\n  // console.log(tag, attrs, ...children);\r\n  return {\r\n    tag,\r\n    attrs,\r\n    children,\r\n    key: attrs.key || null\r\n    //标注唯一性\r\n  }\r\n}\r\nexport default createElement;","export function setAttribute(dom, name, value) {\r\n  if(name === 'className') name = 'class';\r\n  if(/on\\w+/.test(name)) {\r\n    name = name.toLowerCase();\r\n    dom[name] = value || '';\r\n  }else if(name === 'style') {\r\n    if (!value || typeof value === 'string') {\r\n      dom.style.cssText = value;\r\n    }else if (value && typeof value === 'Object') {\r\n      for(let name in value) {\r\n        // fontSize 驼峰式命名\r\n        dom.style[name] = typeof value[name]  === 'number' ?value[name] + 'px':value[name];\r\n      }\r\n    }\r\n  }else {\r\n    if (name in dom) {\r\n      dom[name] = value || '';\r\n    }\r\n    if(value) {\r\n      dom.setAttribute(name, value);\r\n    }else {\r\n      dom.removeAttribute(name, value);\r\n    }\r\n  }\r\n}","import { setAttribute } from './dom.js'\r\nimport Component from '../react/component.js';\r\n\r\n\r\n/**\r\n * 将虚拟DOM 返回真实DOM\r\n * @params vnode 虚拟DOM\r\n * @return 返回DOM\r\n */\r\n\r\nfunction _render(vnode) {\r\n  // console.log(vnode);\r\n  // return document.createTextNode(\"render\");\r\n  // 1. 递归 将节点转成DOM， 子节点递归，出口就是文本节点\r\n  // 2. 节点类型： 三种\r\n        // 文本节点：return createTextNode()\r\n        // 标签节点：createElement, attr,children设置 -》（递归 _render()）\r\n        // Component组件： render( return jsx)\r\n  if(vnode === undefined || vnode === null || typeof vnode === \"boolean\") vnode = '';\r\n  \r\n  if(typeof vnode === 'number') {\r\n    vnode = String(vnode);\r\n  }\r\n\r\n  if( typeof vnode === 'string') {\r\n    let textNode = document.createTextNode(vnode);\r\n    return textNode;\r\n  }\r\n\r\n  if(typeof vnode.tag === 'function') {\r\n    // console.log(vnode);\r\n    // return document.createTextNode('component');\r\n    const component = createComponent(vnode.tag,vnode.attrs);\r\n    setComponentProps(component, vnode.attrs);\r\n    return component.base;\r\n  }\r\n  const dom = document.createElement(vnode.tag);\r\n  if(vnode.attrs) {\r\n    Object.keys(vnode.attrs).forEach(key => {\r\n      const value = vnode.attrs[key];\r\n      setAttribute(dom, key, value);\r\n    })\r\n  }\r\n  if(vnode.children) {\r\n    vnode.children.forEach(child => render(child, dom));\r\n  }\r\n  return dom;\r\n\r\n}\r\nfunction setComponentProps (component, props) {\r\n  component.props = props;\r\n  renderComponent(component);\r\n}\r\n// 将component里的jsx转化为dom,他还会在setState时调用\r\nexport function renderComponent(component) {\r\n  let base; //jsx->dom\r\n  const renderer= component.render();\r\n  base = _render(renderer);\r\n  // 非第一次渲染组件\r\n  if(component.base && component.base.parentNode) {\r\n    component.base.parentNode.replaceChild(base, component.base)//replaceChild(x,y) 前面替换后面的\r\n  }\r\n  component.base = base;\r\n  base._component = component;\r\n}\r\nfunction createComponent(component, props) {\r\n  let inst;\r\n  if (component.prototype && component.prototype.render) {\r\n    inst = new component(props);\r\n  }else {\r\n    inst = new Component(props);\r\n    inst.constructor = component;\r\n    inst.render = function() {\r\n      return this.constructor(props);\r\n    }\r\n  }\r\n  return inst;\r\n}\r\n\r\nexport function render(vnode, container){  //container 外层父节点\r\n  // console.log(vnode, container)\r\n  return container.appendChild(_render(vnode));\r\n}\r\n","import { renderComponent } from \"../react-dom/render\";\r\n\r\nclass Component {\r\n  constructor (props = {}) {\r\n    this.isReactComponent = true;\r\n    this.state = {};\r\n    this.props = props;\r\n  }\r\n\r\n  setState(stateChange) {\r\n    Object.assign(this.state, stateChange);\r\n    // 更新DOM\r\n    renderComponent(this);\r\n  }\r\n}\r\n\r\nexport default Component;\r\n","import createElement from './create-element.js';\r\nimport Component from './component.js'\r\nexport default {\r\n  createElement,\r\n  Component\r\n}","import { render } from './render';\r\nexport default {\r\n  render\r\n}","import React from './react';\r\nimport ReactDOM from './react-dom';\r\n\r\nclass Counter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      num: 1\r\n    }\r\n  }\r\n  render () {\r\n    return (\r\n      <div>\r\n        <h1>count:{ this.state.num }</h1>\r\n        <button onClick={()=> this.onClick()}>add</button>\r\n      </div>\r\n    )\r\n  }\r\n  onClick() {\r\n    // console.log('onclick');\r\n    this.setState({\r\n      num: this.state.num+1\r\n    })\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  <div>\r\n    Hello\r\n    <span className='rt' onClick=\"console.log('zz');\"\r\n    style={{fontSize: 20, fontWeight: 'bold'}}\r\n    > World!</span>\r\n    <Counter/>\r\n  </div>\r\n  ,\r\n   document.getElementById('root'))\r\n"]}